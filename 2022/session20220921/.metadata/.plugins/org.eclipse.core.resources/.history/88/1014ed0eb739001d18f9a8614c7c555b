import org.junit.runner.RunWith;

import com.tngtech.archunit.core.domain.JavaClasses;
import com.tngtech.archunit.core.importer.ClassFileImporter;
import com.tngtech.archunit.junit.AnalyzeClasses;
import com.tngtech.archunit.junit.ArchUnitRunner;
import com.tngtech.archunit.lang.ArchRule;

@RunWith(ArchUnitRunner.class)
@AnalyzeClasses(packages = "com.mycompany.myapp")
public class ArchTest {

	@FizzBuzzArchTest
	public void Services_should_only_be_accessed_by_Controllers() {
	    JavaClasses importedClasses = new ClassFileImporter().importPackages("com.mycompany.myapp");
	
	    ArchRule myRule = classes()
	        .that().resideInAPackage("..service..")
	        .should().onlyBeAccessed().byAnyPackage("..controller..", "..service..");
	
	    myRule.check(importedClasses);
	}

}